<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://kit.fontawesome.com/a076d05399.js"></script>
  <title>Registration</title>
</head>
<body>
  <div class="container  mt-3 p-4">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="card">
          <div class="card-header ">
            <h1 class="text-center">Registration</h1>
          </div>
          <div class="card-body">
            <form (ngSubmit)="onRegister()" #registerForm="ngForm">
              <div class="form-group">
                <label for="username">Username: <span class="required">*</span></label>
               <input type="text"
                  name="username"
                  [(ngModel)]="username"
                  #usernameField="ngModel"
                  class="form-control"
                  required
                  minlength="3"
                  maxlength="20"
                  pattern="^[a-zA-Z][a-zA-Z\s]*$"
                  placeholder="Enter your username"/>
                <div *ngIf="usernameField.invalid && usernameField.touched" class="text-danger">
                  <div *ngIf="usernameField.errors?.required">Username is required.</div>
                  <div *ngIf="usernameField.errors?.minlength">Username must be at least 3 characters long.</div>
                  <div *ngIf="usernameField.errors?.maxlength">Username cannot be more than 20 characters long.</div>
                  <div *ngIf="usernameField.errors?.pattern">Username can only contain letters.</div>
                </div>
              </div>
              <div class="form-group">
                <label for="email">Email: <span class="required">*</span></label>
                <input
                  id="email"
                  type="email"
                  name="email"
                  [(ngModel)]="email"
                  #emailField="ngModel"
                  class="form-control"
                  required
                  placeholder="Enter your email"
                />
                <div *ngIf="emailField.invalid && emailField.touched" class="text-danger">
                  <div *ngIf="emailField.errors?.required">Email is required.</div>
                  <div *ngIf="emailField.errors?.email">Please enter a valid email address.</div>
                </div>
              </div>
              <div class="form-group">
                <label for="password">Password: <span class="required">*</span></label>
                <div class="input-group">
                  <input [type]="passwordFieldType"
                    id="password"
                    name="password"
                    [(ngModel)]="password"
                    #passwordField="ngModel"
                    class="form-control"
                    required
                    minlength="6"
                    pattern="^(?=.*[A-Za-z])(?=.*\d)(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]+$"placeholder="Enter your password"/>
                    </div>
                    <div>
                      
                    <div *ngIf="passwordField.invalid && passwordField.touched" class="text-danger">
                      <div *ngIf="passwordField.errors?.required">Password is required.</div>
                      <div *ngIf="passwordField.errors?.minlength">Password must be at least 6 characters long.</div>
                      <div *ngIf="passwordField.errors?.pattern">Password must contain a combination of letters and numbers.</div>
                  

                    </div>
                    </div>
                  
                
              </div>
              <div class="form-group">
                <label for="confirmPassword">Confirm Password: <span class="required">*</span></label>
                <div class="input-group">
                  <input
                    [type]="confirmPasswordFieldType"
                    id="confirmPassword"
                    name="confirmPassword"
                    [(ngModel)]="confirmPassword"
                    #confirmPasswordField="ngModel"
                    class="form-control"
                    required
                    placeholder="Confirm your password"
                  />
                  <div class="input-group-append">
                    <span class="input-group-text" (click)="togglePasswordVisibility('confirmPassword')">
                      <i class="fa" [ngClass]="confirmPasswordFieldType === 'password' ? 'fa-eye-slash' : 'fa-eye'"></i>
                    </span>
                  </div>
                </div>
                <div *ngIf="confirmPasswordField.invalid && confirmPasswordField.touched" class="text-danger">
                  <div *ngIf="confirmPasswordField.errors?.required">Confirm Password is required.</div>
                  <div *ngIf="password !== confirmPassword && confirmPasswordField.touched">Passwords do not match.</div>
                </div>
              </div>
              <div class="form-group">
                <label for="mobileNumber">Mobile Number: <span class="required">*</span></label>
                <input
                  id="mobileNumber"
                  type="text"
                  name="mobileNumber"
                  [(ngModel)]="mobileNumber"
                  #mobileNumberField="ngModel"
                  class="form-control"
                  required
                  pattern="^\d{10}$"
                  placeholder="Enter your mobile number"
                />
                <div *ngIf="mobileNumberField.invalid && mobileNumberField.touched" class="text-danger">
                  <div *ngIf="mobileNumberField.errors?.required">Mobile number is required.</div>
                  <div *ngIf="mobileNumberField.errors?.pattern">Please enter a valid 10-digit mobile number.</div>
                </div>
              </div>
              <div class="form-group">
                <label for="role">Role: <span class="required">*</span></label>
                <select
                  id="role"
                  name="role"
                  [(ngModel)]="userRole"
                  #roleField="ngModel"
                  class="form-control"
                  required
                >
                  <option value="">Select a role</option>
                  <option value="User">User</option>
                  <option value="Admin">Admin</option>
                </select>
                <div *ngIf="roleField.invalid && roleField.touched" class="text-danger">
                  <div *ngIf="roleField.errors?.required">Role is required.</div>
                </div>
              </div>
              <div class="form-group" *ngIf="userRole === 'Admin'">
                <label for="secretKey">Secret Key: <span class="required">*</span></label>
                <input
                  id="secretKey"
                  type="text"
                  name="secretKey"
                  [(ngModel)]="secretKey"
                  #secretKeyField="ngModel"
                  class="form-control"
                  required
                  placeholder="Enter the secret key"
                />
                <div *ngIf="secretKeyField.invalid && secretKeyField.touched" class="text-danger">
                  <div *ngIf="secretKeyField.errors?.required">Secret Key is required for Admin registration.</div>
                </div>
              </div>
              <button type="submit" class="btn btn-success btn-block" [disabled]="registerForm.invalid">Register</button>
            </form>
            <p class="text-center mt-3" >Already have an account? <a href="/login">Login Here</a></p>
            <!-- <p><a href="/error">error</a></p> -->
            <!-- <p><a href="/home">home</a></p> -->
            <p><a href="/admineditinternship">admininternship</a></p>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
